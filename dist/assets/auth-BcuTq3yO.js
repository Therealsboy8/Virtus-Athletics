import"./modulepreload-polyfill-B5Qt9EMX.js";import"./supabase-client-0eOI4Eft.js";import"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";let i=!1;const w=document.getElementById("authForm"),l=document.getElementById("authTitle"),n=document.getElementById("submitBtn"),a=document.getElementById("toggleMode"),r=document.getElementById("errorMessage"),d=document.getElementById("successMessage");a.addEventListener("click",()=>{i=!i,i?(l.textContent="Sign Up",n.textContent="Create Account",a.innerHTML='Already have an account? <span class="font-semibold">Sign In</span>'):(l.textContent="Sign In",n.textContent="Sign In",a.innerHTML=`Don't have an account? <span class="font-semibold">Sign Up</span>`),m()});w.addEventListener("submit",async t=>{t.preventDefault(),m();const o=document.getElementById("email").value,s=document.getElementById("password").value;if(s.length<6){c("Password must be at least 6 characters");return}n.disabled=!0,n.textContent="Processing...";try{let e;i?(e=await window.supabaseService.signUp(o,s),e.error||(u("Account created! Please check your email to verify your account."),setTimeout(()=>{window.location.href="community.html"},2e3))):(e=await window.supabaseService.signIn(o,s),e.error||(u("Signed in successfully! Redirecting..."),setTimeout(()=>{const g=new URLSearchParams(window.location.search).get("redirect")||"community.html";window.location.href=g},1e3))),e.error&&c(e.error.message||"An error occurred")}catch{c("An unexpected error occurred")}finally{n.disabled=!1,n.textContent=i?"Create Account":"Sign In"}});function c(t){r.textContent=t,r.classList.remove("hidden")}function u(t){d.textContent=t,d.classList.remove("hidden")}function m(){r.classList.add("hidden"),d.classList.add("hidden")}async function h(){const o=Date.now();for(;!window.supabaseService.initialized&&!(Date.now()-o>5e3);)await new Promise(s=>setTimeout(s,100));window.supabaseService.isAuthenticated()&&(window.location.href="community.html")}h();
