import"./shopify-0dN3W67C.js";import"./supabase-client-0eOI4Eft.js";let r=[],a=1;const m=9;document.addEventListener("DOMContentLoaded",function(){p()});function p(){const e=y();switch(g(),h(),e){case"index":v();break;case"shop":b();break;case"community":A();break}}function y(){const e=window.location.pathname;return e.includes("shop.html")?"shop":e.includes("community.html")?"community":"index"}function g(){const e={threshold:.1,rootMargin:"0px 0px -50px 0px"},n=new IntersectionObserver(t=>{t.forEach(i=>{i.isIntersecting&&i.target.classList.add("active")})},e);document.querySelectorAll(".reveal").forEach(t=>{n.observe(t)})}function h(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(n){n.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})}function v(){document.getElementById("typed-tagline")&&new Typed("#typed-tagline",{strings:["Earn Your Virtus.","Elite Is Earned.","Discipline Over Everything."],typeSpeed:80,backSpeed:50,backDelay:2e3,loop:!0,showCursor:!0,cursorChar:"|"}),S(),B(),w()}async function w(){try{const e=await window.shopifyIntegration.getAllProducts(6);if(e&&e.length>0){const n=document.querySelector("#home .grid");n&&(n.innerHTML=e.slice(0,6).map((t,i)=>x(t,i)).join(""))}}catch(e){console.error("Error loading featured products:",e)}}function x(e,n){var t;return`
        <div class="product-card rounded-xl p-6 reveal stagger-delay-${n%6+1}">
            <img src="${e.image}" alt="${e.name}" class="w-full h-64 object-cover rounded-lg mb-4">
            <h3 class="text-xl font-bold mb-2">${e.name}</h3>
            <p class="text-gray-400 mb-4">${e.description.substring(0,80)}...</p>
            <div class="flex justify-between items-center">
                <span class="text-2xl font-bold text-yellow-600">$${e.price.toFixed(2)}</span>
                <button onclick="window.addToCart('${e.shopifyId}', '${(t=e.variants[0])==null?void 0:t.id}')" class="btn-primary px-4 py-2 rounded text-sm">Add to Cart</button>
            </div>
        </div>
    `}async function b(){await c(),s(),L(),k(),C(),I()}async function c(){try{const e=await window.shopifyIntegration.getAllProducts(50);e&&e.length>0&&(r=e)}catch(e){console.error("Error loading products:",e)}}function s(){const e=document.getElementById("productsGrid");if(!e)return;const n=(a-1)*m,t=n+m,i=r.slice(n,t);a===1&&(e.innerHTML=""),i.forEach((d,u)=>{const f=E(d,u);e.appendChild(f)});const o=document.getElementById("productCount");o&&(o.textContent=r.length),typeof anime<"u"&&anime({targets:".product-card",opacity:[0,1],translateY:[30,0],delay:anime.stagger(100),duration:600,easing:"easeOutQuad"})}function E(e,n){const t=document.createElement("div");t.className="product-card rounded-xl p-6 reveal",t.style.transitionDelay=`${n*.1}s`;const i=e.variants&&e.variants[0];return t.innerHTML=`
        <div class="relative overflow-hidden rounded-lg mb-4">
            <img src="${e.image}" alt="${e.name}" class="w-full h-64 object-cover transition-transform duration-300 hover:scale-110">
            ${e.featured?'<div class="absolute top-2 right-2 bg-yellow-600 text-white px-2 py-1 rounded text-xs font-semibold">FEATURED</div>':""}
        </div>
        <h3 class="text-xl font-bold mb-2">${e.name}</h3>
        <p class="text-gray-400 mb-4">${e.description.substring(0,100)}...</p>
        <div class="flex justify-between items-center">
            <span class="text-2xl font-bold text-yellow-600">$${e.price.toFixed(2)}</span>
            <div class="flex space-x-2">
                <button onclick="window.quickView('${e.shopifyId}')" class="text-gray-400 hover:text-yellow-600 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                    </svg>
                </button>
                <button onclick="window.addToCart('${e.shopifyId}', '${i==null?void 0:i.id}')" class="btn-primary px-4 py-2 rounded text-sm">Add to Cart</button>
            </div>
        </div>
    `,t}function L(){document.querySelectorAll("[data-filter]").forEach(t=>{t.addEventListener("click",function(){document.querySelectorAll("[data-filter]").forEach(o=>o.classList.remove("active")),this.classList.add("active");const i=this.dataset.filter;i==="all"?c().then(()=>{a=1,s()}):(r=r.filter(o=>o.category===i),a=1,s())})}),document.querySelectorAll("[data-price]").forEach(t=>{t.addEventListener("click",async function(){await c();const i=this.dataset.price;r=r.filter(o=>i==="0-50"?o.price<50:i==="50-100"?o.price>=50&&o.price<=100:i==="100-200"?o.price>=100&&o.price<=200:i==="200+"?o.price>=200:!0),a=1,s()})});const e=document.getElementById("sortSelect");e&&e.addEventListener("change",function(){const t=this.value;r.sort((i,o)=>{switch(t){case"price-low":return i.price-o.price;case"price-high":return o.price-i.price;case"newest":return o.id-i.id;default:return o.featured-i.featured}}),a=1,s()});const n=document.getElementById("clearFilters");n&&n.addEventListener("click",async function(){var t;await c(),a=1,document.querySelectorAll(".filter-btn").forEach(i=>{i.classList.remove("active")}),(t=document.querySelector('[data-filter="all"]'))==null||t.classList.add("active"),e&&(e.value="featured"),s()})}function k(){const e=document.getElementById("searchInput");if(!e)return;let n;e.addEventListener("input",async function(){clearTimeout(n),n=setTimeout(async()=>{const t=this.value.toLowerCase().trim();await c(),t!==""&&(r=r.filter(i=>i.name.toLowerCase().includes(t)||i.description.toLowerCase().includes(t)||i.category.toLowerCase().includes(t))),a=1,s()},300)})}function C(){const e=document.getElementById("quickViewModal"),n=document.getElementById("closeModal");n&&n.addEventListener("click",()=>{e.classList.remove("active")}),e&&e.addEventListener("click",t=>{t.target===e&&e.classList.remove("active")})}window.quickView=async function(e){const n=r.find(f=>f.shopifyId===e);if(!n)return;const t=document.getElementById("quickViewModal"),i=document.getElementById("modalImage"),o=document.getElementById("modalTitle"),d=document.getElementById("modalDescription"),u=document.getElementById("modalPrice");i&&(i.src=n.image),o&&(o.textContent=n.name),d&&(d.textContent=n.description),u&&(u.textContent=`$${n.price.toFixed(2)}`),t.classList.add("active")};function I(){const e=document.getElementById("loadMore");e&&e.addEventListener("click",function(){a++,s(),a*m>=r.length&&(this.style.display="none")})}function S(){document.querySelectorAll(".product-card").forEach(e=>{typeof anime>"u"||(e.addEventListener("mouseenter",function(){anime({targets:this,rotateX:5,rotateY:5,scale:1.02,duration:300,easing:"easeOutQuad"})}),e.addEventListener("mouseleave",function(){anime({targets:this,rotateX:0,rotateY:0,scale:1,duration:300,easing:"easeOutQuad"})}))})}function B(){document.querySelectorAll('input[type="email"]').forEach(n=>{const t=n.nextElementSibling;t&&t.tagName==="BUTTON"&&t.addEventListener("click",function(i){i.preventDefault();const o=n.value.trim();o&&D(o)?(l("Welcome to Virtus! Check your email for your 10% discount code.","success"),n.value=""):l("Please enter a valid email address.","error")})})}function A(){P()}function P(){const e=document.getElementById("progressChart");if(!e||typeof echarts>"u")return;const n=echarts.init(e),t={backgroundColor:"transparent",title:{text:"Strength Progress Over Time",textStyle:{color:"#ffffff",fontSize:18}},tooltip:{trigger:"axis",backgroundColor:"#1A1A1A",borderColor:"#8B6914",textStyle:{color:"#ffffff"}},legend:{data:["Push-ups","Pull-ups","Plank Hold (seconds)"],textStyle:{color:"#ffffff"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["Day 1","Day 5","Day 10","Day 15","Day 20","Day 25","Day 30"],axisLine:{lineStyle:{color:"#2D2D2D"}},axisLabel:{color:"#9CA3AF"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#2D2D2D"}},axisLabel:{color:"#9CA3AF"},splitLine:{lineStyle:{color:"#2D2D2D"}}},series:[{name:"Push-ups",type:"line",data:[25,32,38,45,52,58,65],lineStyle:{color:"#8B6914"},itemStyle:{color:"#8B6914"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(139, 105, 20, 0.3)"},{offset:1,color:"rgba(139, 105, 20, 0.1)"}]}}},{name:"Pull-ups",type:"line",data:[8,10,12,15,18,20,22],lineStyle:{color:"#A0781A"},itemStyle:{color:"#A0781A"}},{name:"Plank Hold (seconds)",type:"line",data:[45,75,120,150,180,210,240],lineStyle:{color:"#B8860B"},itemStyle:{color:"#B8860B"}}]};n.setOption(t),window.addEventListener("resize",()=>{n.resize()})}function D(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function l(e,n="info"){const t=document.createElement("div");switch(t.className="fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transform translate-x-full transition-transform duration-300",n){case"success":t.classList.add("bg-green-600","text-white");break;case"error":t.classList.add("bg-red-600","text-white");break;case"info":default:t.classList.add("bg-yellow-600","text-white");break}t.innerHTML=`
        <div class="flex items-center justify-between">
            <p class="text-sm">${e}</p>
            <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-white hover:text-gray-200">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    `,document.body.appendChild(t),setTimeout(()=>{t.classList.remove("translate-x-full")},100),setTimeout(()=>{t.classList.add("translate-x-full"),setTimeout(()=>{t.remove()},300)},5e3)}window.addToCart=function(e,n){const t=r.find(o=>o.shopifyId===e);if(!t){l("Product not found","error");return}window.shopifyIntegration.addToCart(t,n,1)?l("Product added to cart!","success"):l("Error adding product to cart","error")};document.addEventListener("click",function(e){if(e.target.matches('.nav-link[href^="#"]')){e.preventDefault();const n=document.querySelector(e.target.getAttribute("href"));n&&n.scrollIntoView({behavior:"smooth",block:"start"})}});window.addEventListener("resize",function(){const e=document.getElementById("progressChart");e&&typeof echarts<"u"&&echarts.getInstanceByDom(e)&&echarts.getInstanceByDom(e).resize()});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();
